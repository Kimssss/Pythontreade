# 자동매매 전략 문서

## 전략 1: 모멘텀 + 거래량 전략 (Momentum Volume Strategy)

### 개요

모멘텀과 거래량을 결합한 단기 매매 전략입니다. 거래량 급등과 함께 상승 추세를 보이는 종목을 자동으로 선택하여 매수하고, 설정된 익절/손절 조건에 따라 자동으로 매도합니다.

---

## 1. 종목 선택 (Stock Screening)

### 1.1 1차 필터: 거래량 상위 종목
```
- 코스피/코스닥 거래량 상위 30종목 스캔
- 평균 거래량 대비 200% 이상 급등 종목
```

### 1.2 2차 필터: 가격 및 등락률
```
- 최소 주가: 1,000원 (저가주 제외)
- 최대 주가: 500,000원 (고가주 제외)
- 등락률: +2% ~ +8% (적정 상승폭)
```

### 1.3 3차 필터: 기술적 분석
```
- 5일 이동평균선 위에서 거래
- RSI 50~70 구간 (적정 모멘텀)
```

---

## 2. 매수 조건 (Buy Signals)

모든 조건을 **동시에** 충족해야 매수합니다:

| 조건 | 설명 | 근거 |
|------|------|------|
| MA5 상회 | 현재가 > 5일 이동평균 | 단기 상승 추세 확인 |
| RSI 50-70 | RSI가 50~70 사이 | 과매수 아닌 상승 구간 |
| 거래량 급등 | 평균 대비 200% 이상 | 세력/기관 매집 신호 |
| 등락률 | +2% ~ +8% | 급등 초입 포착 |

### 매수 신호 예시
```
✅ 매수 조건 충족:
   - 현재가 52,000원 > MA5 51,200원
   - RSI 58 (적정 구간)
   - 거래량 350% (평균 대비)
   - 등락률 +4.2%
```

---

## 3. 매도 조건 (Sell Signals)

아래 조건 중 **하나라도** 충족하면 매도합니다:

### 3.1 익절 (Take Profit)
```
수익률 >= +5% → 전량 매도
```

### 3.2 손절 (Stop Loss)
```
수익률 <= -3% → 전량 매도
```

### 3.3 보유 기간 초과
```
보유 기간 >= 3일 → 전량 매도
```

### 3.4 기술적 매도 신호
```
RSI > 70 (과매수) + 전일 대비 하락 → 전량 매도
```

### 매도 신호 예시
```
🛍️ 매도 실행:
   - 종목: 삼성전자
   - 사유: 익절 (+5.2%)
   - 매수가: 70,000원
   - 매도가: 73,640원
```

---

## 4. 자금 관리 (Position Sizing)

### 4.1 분산 투자
```
- 최대 보유 종목: 5개
- 종목당 투자 비율: 총 자금의 20%
```

### 4.2 일일 거래 제한
```
- 일일 최대 매수: 3회
- 장 마감 10분 전 신규 매수 중단
```

### 4.3 리스크 관리
```
종목당 최대 손실: 총 자금의 0.6% (20% × 3%)
일일 최대 손실: 총 자금의 1.8% (3종목 × 0.6%)
```

---

## 5. 운영 시간

### 5.1 자동매매 시간
```
시작: 09:05 (장 시작 5분 후)
종료: 15:20 (장 마감 10분 전)
```

### 5.2 체크 간격
```
보유 종목 모니터링: 매 1분
신규 종목 스캔: 매 5분
```

---

## 6. 설정값 (Configuration)

### 기본 설정
```python
{
    # 종목 선택
    'min_price': 1000,           # 최소 주가
    'max_price': 500000,         # 최대 주가
    'min_volume_ratio': 2.0,     # 최소 거래량 비율
    'min_change_rate': 2.0,      # 최소 등락률
    'max_change_rate': 8.0,      # 최대 등락률

    # 매수 조건
    'buy_rsi_min': 50,           # 최소 RSI
    'buy_rsi_max': 70,           # 최대 RSI

    # 매도 조건
    'take_profit': 5.0,          # 익절 %
    'stop_loss': -3.0,           # 손절 %
    'max_hold_days': 3,          # 최대 보유일

    # 자금 관리
    'max_stocks': 5,             # 최대 보유 종목
    'position_ratio': 0.2,       # 종목당 투자 비율
    'max_buy_per_day': 3,        # 일일 매수 한도
}
```

---

## 7. 전략 플로우차트

```
┌─────────────────────────────────────────────────────────┐
│                    장 시작 (09:05)                       │
└─────────────────────┬───────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────┐
│              1. 보유 종목 매도 검사                       │
│  ┌─────────────────────────────────────────────────┐   │
│  │ • 수익률 체크 (익절/손절)                         │   │
│  │ • 보유 기간 체크                                  │   │
│  │ • RSI 과매수 체크                                │   │
│  └─────────────────────────────────────────────────┘   │
│                      │                                  │
│         매도 조건 충족? ──Yes──▶ 매도 주문 실행          │
│                      │                                  │
│                     No                                  │
└─────────────────────┬───────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────┐
│              2. 매수 가능 여부 확인                       │
│  ┌─────────────────────────────────────────────────┐   │
│  │ • 보유 종목 수 < 5                               │   │
│  │ • 일일 매수 횟수 < 3                             │   │
│  │ • 가용 현금 충분                                 │   │
│  └─────────────────────────────────────────────────┘   │
│                      │                                  │
│         매수 가능? ──No──▶ 대기                         │
│                      │                                  │
│                    Yes                                  │
└─────────────────────┬───────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────┐
│              3. 후보 종목 스캔                           │
│  ┌─────────────────────────────────────────────────┐   │
│  │ • 거래량 상위 종목 조회                           │   │
│  │ • 가격/등락률 필터링                             │   │
│  │ • 이미 보유 종목 제외                            │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────┬───────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────┐
│              4. 상세 분석 및 매수                        │
│  ┌─────────────────────────────────────────────────┐   │
│  │ • 일별 시세 조회                                 │   │
│  │ • MA, RSI 계산                                  │   │
│  │ • 매수 조건 검사                                 │   │
│  │ • 매수 수량 계산                                 │   │
│  └─────────────────────────────────────────────────┘   │
│                      │                                  │
│         매수 신호? ──Yes──▶ 매수 주문 실행              │
│                      │                                  │
│                     No                                  │
└─────────────────────┬───────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────┐
│                 5. 대기 (60초)                          │
│                      │                                  │
│                      ▼                                  │
│              장 마감 전? ──Yes──▶ 1번으로               │
│                      │                                  │
│                     No                                  │
└─────────────────────┬───────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────┐
│                    장 마감 (15:30)                       │
└─────────────────────────────────────────────────────────┘
```

---

## 8. 주의사항

### 8.1 실전투자 전 확인사항
- [ ] 모의투자로 충분히 테스트 완료
- [ ] 설정값 검토 완료
- [ ] API 키 및 계좌 정보 확인
- [ ] 투자 가능 금액 확인

### 8.2 리스크 경고
```
⚠️ 주의:
- 이 전략은 과거 성과를 보장하지 않습니다
- 실전 투자 시 원금 손실이 발생할 수 있습니다
- 반드시 여유 자금으로 투자하세요
- 모의투자로 충분히 검증 후 사용하세요
```

### 8.3 전략의 한계
1. **급변하는 시장**: 급락장에서 손절이 지연될 수 있음
2. **유동성 리스크**: 거래량 적은 종목에서 주문 미체결 가능
3. **API 장애**: 네트워크/서버 문제로 주문 실패 가능
4. **슬리피지**: 시장가 주문 시 예상과 다른 가격에 체결

---

## 9. 향후 개선 방향

### 단기
- [ ] 백테스팅 기능 추가
- [ ] 알림 기능 (텔레그램, 카카오톡)
- [ ] 거래 리포트 자동 생성

### 중기
- [ ] 추가 전략 구현 (변동성 돌파, RSI 역추세 등)
- [ ] 전략 조합 기능
- [ ] 머신러닝 기반 종목 선택

### 장기
- [ ] 포트폴리오 최적화
- [ ] 리스크 패리티 적용
- [ ] 실시간 대시보드

---

## 10. 변경 이력

| 날짜 | 버전 | 변경 내용 |
|------|------|----------|
| 2025-11-25 | 1.0.0 | 최초 작성 |

---

## 문의

문제가 있거나 개선 사항이 있으면 이슈를 등록해주세요.
