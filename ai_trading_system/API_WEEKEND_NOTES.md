# 한국투자증권 API 주말/장외시간 사용 안내

## 현상

주말이나 장외시간에 API를 사용하면 500 에러와 함께 다음 메시지가 나타납니다:
```
{"rt_cd":"1","msg_cd":"EGW00201","msg1":"초당 거래건수를 초과하였습니다."}
```

## 원인

한국투자증권 API는 주말과 장외시간에도 접근 가능하지만, Rate Limiting이 더 엄격하게 적용됩니다.
- 평일 장중: 초당 20회 제한
- 주말/장외시간: 더 엄격한 제한 (추정 초당 1-2회)

## 해결 방법

### 1. API 호출 간격 늘리기
```python
# config/settings.py
KIS_CONFIG = {
    'MIN_REQUEST_INTERVAL': 1.0,  # 1초 간격으로 설정
}
```

### 2. 주말 전용 모드
주말에는 시세 조회와 같은 중요하지 않은 API 호출을 줄이고, 포트폴리오 상태 확인만 하도록 설정

### 3. 캐싱 활용
토큰 캐싱을 통해 불필요한 인증 요청 최소화

## 시스템 점검 시간

매일 23:30 ~ 00:10 사이는 시스템 점검으로 서비스가 중단됩니다.

## 권장사항

1. **개발/테스트**: 주중 장중 시간에 진행
2. **주말 테스트**: API 호출 간격을 1초 이상으로 설정
3. **에러 처리**: 500 에러 발생 시 자동 재시도 로직 구현
4. **모니터링**: 주말에는 읽기 전용 작업만 수행

## 참고

실제 거래는 장중에만 가능하므로, 주말에는 다음 작업만 수행:
- 포트폴리오 현황 확인
- 과거 데이터 분석
- 백테스팅
- 전략 최적화